<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLD - Peer Learning Day</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/toast.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/ai-feedback.css') }}">
    
    <link href="https://fonts.googleapis.com/css?family=Montserrat:700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>">
</head>
<body>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="/" class="logo-link">
                    <span class="logo-texts">
                        <span class="logo-text">HOLBIES</span>
                        <span class="logo-subtext">Learning Hub</span>
                    </span>
                    <img src="{{ url_for('static', path='/images/holberton-hero.png') }}" alt="Holberton" class="logo-img" />
                </a>
            </div>
            
            <div class="nav-content-wrapper">
                <nav class="nav-menu" id="nav-menu">
                    <a href="/" class="nav-link">Accueil</a>
                    <a href="/learning" class="nav-link">Learning</a>
                    <a href="/dashboard" class="nav-link">Dashboard</a>
                    <a href="/profile" class="nav-link">Profil</a>
                </nav>
                
                <div class="nav-user" id="nav-user">
                    <div class="user-dropdown" id="user-dropdown">
                        <button class="user-button" id="user-button">
                            <span class="user-name" id="nav-user-name">Utilisateur</span>
                            <span class="dropdown-arrow">▼</span>
                        </button>
                        <div class="dropdown-content" id="dropdown-content">
                            <a href="/profile" class="dropdown-link">Mon Profil</a>
                            <a href="/dashboard" class="dropdown-link">Dashboard</a>
                            <a href="/logout" class="dropdown-link">Déconnexion</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main class="main-content">
        <div class="pld-layout">
            <!-- Sidebar de navigation à gauche -->
            <aside class="pld-sidebar">
                
                <!-- Navigation des catégories -->
                <div class="sidebar-section">
                    <h3 class="sidebar-section-title" style="text-align: center; font-weight: 700; font-size: 1.2rem; margin-bottom: 1.5rem; color: var(--text-color); text-transform: uppercase; letter-spacing: 1px;">Catégories</h3>
                    <div class="categories-menu" id="categories-menu">
                        {% for category in categories %}
                        <div class="category-menu-item" data-category="{{ category.name.lower() }}" title="{{ category.description }}">
                            <span class="category-icon">{{ category.name[0].upper() }}</span>
                            <span class="category-name">{{ category.name }}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Navigation des thèmes (affiché quand une catégorie est sélectionnée) -->
                <div class="sidebar-section hidden" id="themes-section">
                    <h3 class="sidebar-section-title" style="text-align: center; font-weight: 700; font-size: 1.2rem; margin-bottom: 1.5rem; color: var(--text-color); text-transform: uppercase; letter-spacing: 1px;">Thèmes</h3>
                    <div class="back-button">
                        ← Retour aux catégories
                    </div>
                    <div class="themes-menu" id="themes-menu">
                        <!-- Les thèmes seront chargés dynamiquement -->
                    </div>
                </div>
                
            </aside>
            
            <!-- Contenu principal à droite -->
            <main class="pld-content">
                <!-- Écran de démarrage -->
                <section id="pld-start" class="pld-section active">
                    <!-- En-tête principal avec le même style que Learning -->
                    <div class="learning-header">
                        <h1>Peer Learning Day</h1>
                        <p class="learning-subtitle">Système d'évaluation par intelligence artificielle avec réponses libres</p>
                    </div>
                    
                    <div class="ai-start-info">
                        <h3>Comment fonctionne le PLD ?</h3>
                        <ul>
                            <li><strong>Réponses libres :</strong> Répondez avec vos propres mots en texte libre</li>
                            <li><strong>Correction automatique :</strong> L'IA analyse votre réponse et la compare à la réponse attendue</li>
                            <li><strong>Feedback intelligent :</strong> Obtenez des explications détaillées pour chaque question</li>
                            <li><strong>Notation précise :</strong> Score basé sur la pertinence et la justesse de vos réponses</li>
                        </ul>
                        
                        <div style="display: flex; justify-content: center; margin: 2rem 0;">
                            <div class="start-instruction">
                                <p>Commencez par sélectionner une catégorie dans la barre latérale</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Écran de sélection des thèmes -->
                <section id="pld-categories" class="pld-section hidden">
                    <h2 class="glitch">Choisissez un thème</h2>
                    <div class="category-grid" id="category-grid">
                        <!-- Les catégories seront affichées ici dynamiquement -->
                    </div>
                </section>
                
                <!-- Écran de sélection des thèmes -->
                <section id="pld-themes" class="pld-section hidden">
                    <h2 class="glitch">Thèmes</h2>
                    <div class="themes-grid" id="themes-grid">
                        <!-- Les thèmes seront affichés ici dynamiquement -->
                    </div>
                </section>
                
                <!-- Écran de quiz -->
                <section id="pld-quiz" class="pld-section hidden">
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-progress">
                                <span class="question-counter">Question <span id="current-question">1</span> sur <span id="total-questions">10</span></span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-content">
                            <div class="question-card">
                                <h3 class="question-title" id="question-title"></h3>
                                <div class="question-text" id="question-text"></div>
                                
                                <div class="answer-section">
                                    <label for="user-answer">Votre réponse :</label>
                                    <textarea id="user-answer" placeholder="Tapez votre réponse ici..." rows="6"></textarea>
                                    <div class="answer-actions">
                                        <button id="submit-answer" class="btn-primary">Valider la réponse</button>
                                        <button id="skip-question" class="btn-secondary">Passer la question</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Écran de feedback -->
                <section id="pld-feedback" class="pld-section hidden">
                    <div class="feedback-container">
                        <div class="feedback-header">
                            <h3>Correction de la réponse</h3>
                        </div>
                        
                        <div class="feedback-content">
                            <div class="user-answer-display">
                                <h4>Votre réponse :</h4>
                                <div class="answer-text" id="user-answer-display"></div>
                            </div>
                            
                            <div class="feedback-analysis">
                                <div class="score-display">
                                    <span class="score-label">Score :</span>
                                    <span class="score-value" id="question-score">0/10</span>
                                </div>
                                
                                <div class="feedback-text" id="feedback-text"></div>
                                
                                <div class="expected-answer">
                                    <h4>Réponse attendue :</h4>
                                    <div class="answer-text" id="expected-answer"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="feedback-actions">
                            <button id="next-question" class="btn-primary">Question suivante</button>
                        </div>
                    </div>
                </section>
                
                <!-- Écran de résultats -->
                <section id="pld-results" class="pld-section hidden">
                    <div class="results-container">
                        <div class="results-header">
                            <h1>Résultats du PLD</h1>
                            <div class="final-score">
                                <span class="score-text">Score final :</span>
                                <span class="score-number" id="final-score">0</span>
                                <span class="score-total">/100</span>
                            </div>
                        </div>
                        
                        <div class="results-summary" id="results-summary">
                            <!-- Résumé des résultats -->
                        </div>
                        
                        <div class="results-actions">
                            <button class="btn-primary" data-action="restart">Recommencer</button>
                            <button class="btn-secondary" data-action="home">Retour à l'accueil</button>
                        </div>
                    </div>
                </section>
            </main>
        </div>
        
        <!-- Sections masquées temporairement -->
        <div class="legacy-content" style="display: none;">
            
            <!-- Sections masquées temporairement -->
            <div class="hidden-sections">
                        
                        <div class="category-card" data-category="c">
                            <div class="category-icon">C</div>
                            <div class="category-name">C</div>
                            <div class="category-description">Programmation système, pointeurs</div>
                        </div>
                        
                        <div class="category-card" data-category="python">
                            <div class="category-icon">PY</div>
                            <div class="category-name">Python</div>
                            <div class="category-description">Syntaxe, structures de données</div>
                        </div>
                        
                        <div class="category-card" data-category="javascript">
                            <div class="category-icon">JS</div>
                            <div class="category-name">JavaScript</div>
                            <div class="category-description">DOM, événements, async</div>
                        </div>
                        
                        <div class="category-card" data-category="sql">
                            <div class="category-icon">SQL</div>
                            <div class="category-name">SQL</div>
                            <div class="category-description">Bases de données, requêtes</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Section de sélection de catégorie basique (fallback) -->
            <section id="category-selection" class="hidden">
                <h2>Sélection de catégorie</h2>
                <div class="basic-categories">
                    {% for category in categories %}
                    <div class="basic-category-item">
                        <span>{{ category.name }}</span>
                    </div>
                    {% endfor %}
                </div>
            </section>
            
            <!-- Breadcrumb caché -->
            <div class="breadcrumb hidden">
                <div class="breadcrumb-content">
                    <div class="breadcrumb-item">
                        <span>Quiz</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="{{ url_for('static', path='/js/toast.js') }}"></script>
    <script src="{{ url_for('static', path='/js/main.js') }}"></script>
    <script src="{{ url_for('static', path='/js/pld.js') }}"></script>
</body>
</html>
