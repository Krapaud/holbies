.{# ...existing code... #}
{% extends "base.html" %}

{% block extra_css %}
</style>
<link rel="stylesheet" href="{{ url_for('static', path='css/tutor.css') }}">
<style>
/* UI Python Tutor am√©lior√©e */
.tutor-main { max-width: 1100px; margin: 2rem auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 12px #e2e8f0; padding: 2rem; }
.tutor-title { font-size: 2.3rem; font-weight: bold; margin-bottom: 0.5rem; color: #1e293b; letter-spacing: 0.5px; text-shadow: 0 2px 8px #e0e7ff; }
.tutor-desc { color: #334155; margin-bottom: 1.5rem; font-size: 1.18rem; font-weight: 500; }
.tutor-toolbar { display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; }
.tutor-toolbar label { font-size: 1.13rem; color: #1e293b; font-weight: 700; letter-spacing: 0.5px; margin-right: 0.3rem; }
.tutor-toolbar select, .tutor-toolbar button { font-size: 1.13rem; }
.tutor-code { width: 100%; min-height: 260px; height: 340px; resize: vertical; font-family: 'Fira Mono', monospace; font-size: 1.08rem; border-radius: 6px; border: 1.5px solid #a5b4fc; padding: 1rem; margin-bottom: 1.2rem; background: #f8fafc; color: #22223b; }
.tutor-stepper { margin: 1.5rem 0; }
.tutor-stepper-controls { display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; justify-content: center; }
.tutor-stepper-controls button { font-size: 1.13rem; padding: 0.35rem 1.3rem; border-radius: 6px; border: none; background: #e0e7ff; color: #3730a3; font-weight: bold; transition: background 0.2s; }
.tutor-stepper-controls button:disabled { background: #f1f5f9; color: #a1a1aa; }
.tutor-stepper-controls button.active { background: #6366f1; color: #fff; }
.tutor-stepper-indicator { font-size: 1.13rem; font-weight: 700; color: #3730a3; }
.tutor-stepper-visual { display: flex; gap: 1.2rem; flex-wrap: wrap; justify-content: space-between; margin-bottom: 0.5rem; }
.tutor-codeview { flex: 2 1 350px; min-width: 320px; }
.tutor-codeview pre { background: #f8fafc; border-radius: 6px; padding: 1.1rem; font-size: 1.08rem; line-height: 1.6; margin: 0; color: #22223b; }
.tutor-codeview .code-line { display: block; padding: 0 0.5rem; border-radius: 4px; }
.tutor-codeview .code-line.active { background: #ffe066; color: #22223b; font-weight: bold; border-left: 4px solid #6366f1; }
.tutor-vars, .tutor-stack, .tutor-heap, .tutor-globals { flex: 1 1 220px; min-width: 200px; background: #f1f5f9; border-radius: 6px; padding: 1rem; margin-bottom: 0.7rem; }
.tutor-vars h5, .tutor-stack h5, .tutor-heap h5, .tutor-globals h5 { margin: 0 0 0.5rem 0; font-size: 1.08rem; color: #2563eb; font-weight: 700; letter-spacing: 0.5px; }
.tutor-vars table, .tutor-heap table, .tutor-globals table { width: 100%; border-collapse: collapse; }
.tutor-vars th, .tutor-vars td, .tutor-heap th, .tutor-heap td, .tutor-globals th, .tutor-globals td { text-align: left; padding: 0.2rem 0.5rem; font-size: 1.04rem; color: #22223b; }
.tutor-vars tr:nth-child(even), .tutor-heap tr:nth-child(even), .tutor-globals tr:nth-child(even) { background: #e0e7ff; }
.tutor-stack { background: #f1f5f9; }
.tutor-stack-frame { margin-bottom: 0.5rem; padding: 0.3rem 0.5rem; border-left: 4px solid #6366f1; background: #e0e7ff; border-radius: 4px; color: #22223b; font-size: 1.04rem; }
.tutor-stack-frame.active { background: #6366f1; color: #fff; border-left: 4px solid #2563eb; }
.tutor-output { margin-top: 1.5rem; background: #f8fafc; border-radius: 6px; padding: 1.1rem; }
.tutor-output h5 { margin: 0 0 0.5rem 0; color: #059669; font-size: 1.08rem; font-weight: 700; }
.tutor-output pre { margin: 0; color: #059669; font-size: 1.08rem; }
.tutor-error { margin-top: 1rem; background: #fff0f0; border-radius: 6px; padding: 1.1rem; color: #b91c1c; }
.tutor-error pre { margin: 0; color: #b91c1c; font-size: 1.08rem; }
</style>
</style>
</style>
{% endblock %}

{% block content %}
<div class="tutor-main">
    <div class="tutor-title">üßë‚Äçüíª Python Tutor Simplifi√©</div>
    <div class="tutor-desc">Ex√©cutez du code Python, visualisez chaque √©tape, variables et pile d'appels. Navigation pas √† pas fa√ßon Python Tutor.</div>
    <div class="tutor-toolbar">
        <label for="language-select">Langage :</label>
        <select id="language-select">
            <option value="python">üêç Python</option>
            <option value="javascript">üìú JavaScript</option>
            <option value="c">‚öôÔ∏è C</option>
        </select>
        <button id="example-btn" type="button">Exemple</button>
        <button id="run-button"><span>‚ñ∂Ô∏è</span> Ex√©cuter</button>
        <button id="clear-button"><span>üóëÔ∏è</span> Effacer</button>
    </div>
    <textarea id="code-input" class="tutor-code" placeholder="# √âcrivez votre code ici..."></textarea>
    <div id="error-output" class="tutor-error"></div>
    <div id="trace-output" class="tutor-stepper"></div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='js/tutor.js') }}?v={{ range(10000,99999)|random }}"></script>
<script>
const EXAMPLES = {
    python: `class Node:\n    def __init__(self, val, next=None):\n        self.val = val\n        self.next = next\n        print(f"Cr√©ation Node({val})")\n\ndef init(n):\n    if n == 0:\n        return None\n    return Node(n, init(n-1))\n\ndef main():\n    l = init(4)\n    print('Liste cr√©√©e')\n\nmain()` ,
        javascript: `function Node(val, next=null) {\n  this.val = val;\n  this.next = next;\n  console.log('JS_TRACE_STEP: Cr√©ation Node(' + val + ')');\n}\nfunction init(n) {\n  if (n === 0) return null;\n  return new Node(n, init(n-1));\n}\nfunction main() {\n  let l = init(4);\n  console.log('JS_TRACE_STEP: Liste cr√©√©e');\n}\nmain();`,
            c: `#include <stdio.h>\n#include <stdlib.h>\ntypedef struct Node {\n  int val;\n  struct Node* next;\n} Node;\nNode* init(int n) {\n  if (n == 0) return NULL;\n  Node* node = malloc(sizeof(Node));\n  node->val = n;\n  node->next = init(n-1);\n  printf("JS_TRACE_STEP: Cr√©ation Node(%d)\\n", n);\n  return node;\n}\nint main() {\n  Node* l = init(4);\n  printf("JS_TRACE_STEP: Liste cr√©√©e\\n");\n  return 0;\n}`
};
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('example-btn').onclick = function() {
        const lang = document.getElementById('language-select').value;
        document.getElementById('code-input').value = EXAMPLES[lang];
    };
});
</script>
{% endblock %}
    for(int i = 0; i < size; i++) {
